function Particle(t,i,o){this.init(t,i,o)}function initiateBubbles(){document.getElementById("container")&&(demo=Sketch.create({container:document.getElementById("container")}),demo.setup=function(){var t,i,o,a;for(t=0;20>t;t++)i=.5*demo.width+random(-100,100),o=.5*demo.height+random(-100,100),demo.spawn(i,o);for(a=0;MAX_BACKGROUND_PARTICLES>a;a++)i=.5*demo.width+random(-300,300),o=demo.height+random(0,100),demo.spawnBackground(i,o)},demo.spawn=function(t,i){var o,a=random(5,40);particles.length>=MAX_PARTICLES&&pool.push(particles.shift()),o=pool.length?pool.pop():new Particle,o.init(t,i,a),o.wander=random(.5,2),o.hue=random(30,50),o.drag=random(.9,.99),theta=random(TWO_PI),force=random(2,8),o.vx=sin(theta)*force,o.vy=cos(theta)*force,particles.push(o)},demo.spawnBackground=function(t,i){var o;backgroundParticles.length>=MAX_BACKGROUND_PARTICLES&&backgroundPool.push(backgroundParticles.shift()),o=backgroundPool.length?backgroundPool.pop():new Particle,o.init(t,i,random(2,4)),o.wander=random(.5,2),o.hue=random(30,50),o.drag=random(.9,.99),theta=random(TWO_PI),force=random(2,8),o.vx=sin(theta)*force,o.vy=cos(theta)*force,backgroundParticles.push(o)},demo.update=function(){var t,i,o,a;backgroundParticles.length;for(t=particles.length-1;t>=0;t--)o=particles[t],o.alive?o.move():pool.push(particles.splice(t,1)[0]);for(i=backgroundParticles.length-1;i>=0;i--)a=backgroundParticles[i],a.alive?a.move(!0):backgroundPool.push(backgroundParticles.splice(i,1)[0])},demo.draw=function(){demo.globalCompositeOperation="lighter";for(var t=particles.length-1;t>=0;t--)particles[t].draw(demo);for(var i=backgroundParticles.length-1;i>=0;i--)backgroundParticles[i].draw(demo)},demo.mousemove=function(){var t,i,o,a,e;for(o=0,e=demo.touches.length;e>o;o++)for(t=demo.touches[o],i=random(1,4),a=0;i>a;a++)demo.spawn(t.x,t.y)})}Particle.prototype={init:function(t,i,o){this.alive=!0,this.radius=o||10,this.wander=.15,this.theta=random(TWO_PI),this.drag=.92,this.hue,this.x=t||0,this.y=i||0,this.vx=0,this.vy=0},move:function(t){t?(this.x+=this.vx,this.y+=this.vy,this.vx*=this.drag,this.theta+=random(-.5,.5)*this.wander,this.vx+=.1*sin(this.theta)):(this.x+=this.vx,this.y+=this.vy,this.vx*=this.drag,this.vy*=this.drag,this.theta+=random(-.5,.5)*this.wander,this.vx+=.1*sin(this.theta),this.vy+=.1*cos(this.theta),this.radius*=.96,this.alive=this.radius>.5)},draw:function(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,TWO_PI),t.fillStyle="hsla("+this.hue+", 0%, 100%, .35)",t.strokeStyle="hsla("+this.hue+", 0%, 90%, .35)",t.fill()},update:function(){(this.x<-this.maxRadius||this.x>demo.width+this.maxRadius||this.y<-this.maxRadius)&&(this.x=random(demo.width),this.y=random(demo.height+this.maxRadius,2*demo.height),this.vx=0,this.vy=-random(1,10)/5)}};var MAX_PARTICLES=800,MAX_BACKGROUND_PARTICLES=1500,particles=[],pool=[],backgroundParticles=[],backgroundPool=[],demo;initiateBubbles();